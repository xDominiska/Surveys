@model Surveys.DTOs.SurveyDTO

@{
    ViewBag.Title = "Ankieta \"0\"";
    ViewBag.Message = "Dane z wywiadu";
    ViewBag.Message2 = "Objawy ze strony dolnego odcinka układu moczowego (LUTS).";
}

<hgroup class="title">
    <h1>@ViewBag.Title</h1>
    <h2>@ViewBag.Message</h2>
    <h3>@ViewBag.Message2</h3>
</hgroup>

@using (Html.BeginForm())
{
    <fieldset>
        <legend>QuestionDTO</legend>

        @if (Model != null)
        {
            @Html.HiddenFor(model => model.PatientId)

            
            if (Model.Questions != null)
            {
                // po pytaniach
                for (int a = 0; a < Model.Questions.Count; a++)
                {
                    if (Model.Questions[a] != null)
                    {
            <p>@Model.Questions[a].Text</p>
                        // po odpowiedziach
                        for (int b = 0; b < Model.Questions[a].Answers.Count; b++)
                        {                            
            @Html.HiddenFor(model => Model.Questions[a].Answers[b].Answer.Id)
                            if (Model.Questions[a].Answers[b].Answer.AnswerTypeId == (int)Surveys.DTOs.AnswerType.RadioButton)
                            {
                                if (Model.Questions[a].Answers[b] != null && Model.Questions[a].Answers[b].Options != null)
                                {
                                    // po opcjach
                                    for (int c = 0; c < Model.Questions[a].Answers[b].Options.Count; c++)
                                    {
                                        if (Model.Questions[a].Answers[b].Options[c] != null)
                                        {
            @Html.RadioButtonFor(model => Model.Questions[a].Answers[b].Text,
                                                                          Model.Questions[a].Answers[b].Options[c].Option.Text);
            @Html.LabelFor(model => Model.Questions[a].Answers[b].Text,
                                                                    Model.Questions[a].Answers[b].Options[c].Option.Text);

                                                                                                                         // następne pytanie
                                                                                                                         if (Model.Questions[a].Answers[b].Options[c].NextQuestion != null)
                                                                                                                         {
            <p>@Model.Questions[a].Answers[b].Options[c].NextQuestion.Text</p>
                                                                                                                             // po odpowiedziach
                                                                                                                             for (int d = 0; d < Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers.Count; d++)
                                                                                                                             {
            @Html.HiddenFor(model => Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Answer.Id)
                                                                                                                                 if (Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d] != null && Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Answer.AnswerTypeId == (int)Surveys.DTOs.AnswerType.RadioButton)
                                                                                                                                 {
                                                                                                                                     // po opcjach
                                                                                                                                     for (int e = 0; e < Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Options.Count; e++)
                                                                                                                                     {
                                                                                                                                         if (Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Options[e] != null)
                                                                                                                                         {
            @Html.RadioButtonFor(model => Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Text,
                                          Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Options[e].Option.Text);
            @Html.LabelFor(model => Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Text,
                                          Model.Questions[a].Answers[b].Options[c].NextQuestion.Answers[d].Options[e].Option.Text);
                                                                                                                                         }
                                                                                                                                     }
                                                                                                                                 }
                                                                                                                             }
                                                                                                                         }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

    </fieldset>
    <p>
        <input type="submit" value="Go!" />
    </p>
    
}